<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glaze Designer — Mid-Fire Oxidation</title>
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">

    <header>
      <h1>Glaze Designer</h1>
      <p class="tagline">Mid-Fire Oxidation · Chemistry Engine</p>
    </header>

    <nav class="tabs">
      <button class="tab active" data-panel="design">Design</button>
      <button class="tab" data-panel="analyze">Analyze</button>
      <button class="tab" data-panel="library">Library</button>
    </nav>

    <main class="content">

      <!-- ═══ DESIGN PANEL ═══ -->
      <section id="design" class="panel active">
        <div class="form-section">
          <label for="glaze-desc">Describe your dream glaze</label>
          <textarea id="glaze-desc" rows="4" placeholder="e.g. buttery matte white, food safe&#10;e.g. glossy tenmoku brown for stoneware&#10;e.g. satin blue-green with variegation"></textarea>
          <div class="form-row">
            <div class="form-field">
              <label for="clay-body">Clay Body</label>
              <div class="select-wrap">
                <select id="clay-body"></select>
              </div>
            </div>
            <div class="form-field">
              <label for="cone-select">Cone</label>
              <div class="select-wrap">
                <select id="cone-select">
                  <option value="5">5</option>
                  <option value="6" selected>6</option>
                </select>
              </div>
            </div>
            <div class="form-field form-field--action">
              <button class="btn btn-primary" id="design-btn">Design</button>
            </div>
          </div>
        </div>

        <div class="loading" id="design-loading"><div class="spinner"></div><p>Calculating recipe…</p></div>
        <div class="error-msg" id="design-error"></div>

        <div class="results" id="design-results">

          <section class="result-section">
            <h3>Recipe</h3>
            <div class="table-scroll">
              <table class="recipe-table" id="design-recipe-table"></table>
            </div>
          </section>

          <section class="result-section">
            <h3>Unity Molecular Formula</h3>
            <div class="umf-chart" id="design-umf-chart"></div>
          </section>

          <section class="result-section">
            <h3>Limit Check</h3>
            <div id="design-limits"></div>
          </section>

          <div class="result-row">
            <section class="result-section result-section--half">
              <h3>Thermal Expansion</h3>
              <div class="cte-display" id="design-cte"></div>
              <div class="cte-note" id="design-cte-note"></div>
            </section>
            <section class="result-section result-section--half">
              <h3>Food Safety</h3>
              <div id="design-food-safety"></div>
            </section>
          </div>

          <section class="result-section" id="design-notes-card" style="display:none">
            <h3>Notes</h3>
            <div class="explanation-text" id="design-explanation"></div>
          </section>

          <section class="result-section">
            <h3>Variations</h3>
            <div class="variation-bar">
              <button class="btn btn-outline btn-small" data-dir="more matte">More Matte</button>
              <button class="btn btn-outline btn-small" data-dir="more glossy">More Glossy</button>
              <button class="btn btn-outline btn-small" data-dir="reduce crazing">Reduce Crazing</button>
              <button class="btn btn-outline btn-small" data-dir="more fluid">More Fluid</button>
              <button class="btn btn-outline btn-small" data-dir="less runny">Less Runny</button>
            </div>
          </section>

          <section class="result-section">
            <h3>Scale Batch</h3>
            <div class="scale-row">
              <div class="form-field">
                <label for="scale-weight">Target weight (g)</label>
                <input type="number" id="scale-weight" value="1000" min="1">
              </div>
              <button class="btn btn-outline" id="scale-btn">Scale</button>
              <button class="btn btn-outline" onclick="window.print()">Print</button>
            </div>
          </section>

        </div>
      </section>

      <!-- ═══ ANALYZE PANEL ═══ -->
      <section id="analyze" class="panel">
        <div class="form-section">
          <h3>Enter Recipe</h3>
          <div id="analyze-rows"></div>
          <div class="form-actions">
            <button class="btn btn-outline btn-small" id="add-material-btn">+ Add Material</button>
            <button class="btn btn-primary" id="analyze-btn">Analyze</button>
          </div>
          <div class="form-row" style="margin-top:1.5rem">
            <div class="form-field">
              <label for="analyze-clay-body">Clay Body (for CTE fit)</label>
              <div class="select-wrap">
                <select id="analyze-clay-body"></select>
              </div>
            </div>
          </div>
        </div>

        <div class="loading" id="analyze-loading"><div class="spinner"></div><p>Analyzing…</p></div>
        <div class="error-msg" id="analyze-error"></div>

        <div class="results" id="analyze-results">
          <section class="result-section" id="analyze-description-card">
            <h3>About This Glaze</h3>
            <div class="glaze-description" id="analyze-description"></div>
          </section>
          <section class="result-section">
            <h3>Recipe</h3>
            <div class="table-scroll">
              <table class="recipe-table" id="analyze-recipe-table"></table>
            </div>
          </section>
          <section class="result-section">
            <h3>Unity Molecular Formula</h3>
            <div class="umf-chart" id="analyze-umf-chart"></div>
          </section>
          <section class="result-section">
            <h3>Limit Check</h3>
            <div id="analyze-limits"></div>
          </section>
          <div class="result-row">
            <section class="result-section result-section--half">
              <h3>Thermal Expansion</h3>
              <div class="cte-display" id="analyze-cte"></div>
              <div class="cte-note" id="analyze-cte-note"></div>
            </section>
            <section class="result-section result-section--half">
              <h3>Food Safety</h3>
              <div id="analyze-food-safety"></div>
            </section>
          </div>
        </div>
      </section>

      <!-- ═══ LIBRARY PANEL ═══ -->
      <section id="library" class="panel">
        <div class="form-section">
          <p class="library-subtitle">Community recipes from Digitalfire, Glazy, and personal collections. Click any recipe to analyze it.</p>
          <div class="library-filters">
            <input type="text" id="lib-search" placeholder="Search glazes…">
            <div class="select-wrap">
              <select id="lib-source-filter">
                <option value="all">All Sources</option>
                <option value="designed">Designed</option>
                <option value="digitalfire">Digitalfire</option>
                <option value="glazy">Glazy</option>
                <option value="personal">Personal</option>
              </select>
            </div>
            <div class="select-wrap">
              <select id="lib-surface-filter">
                <option value="all">All Surfaces</option>
                <option value="glossy">Glossy</option>
                <option value="satin">Satin</option>
                <option value="matte">Matte</option>
              </select>
            </div>
          </div>
        </div>
        <div class="library-count" id="lib-count"></div>
        <div id="lib-list"></div>
      </section>

    </main>

  </div>

  <script src="/static/app.js"></script>
</body>
</html>
